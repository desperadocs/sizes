<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>EXAMPLE OF THE PROGRAM EXECUTION ON A DEC Vax &mdash; sizes 2014.02.21 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2014.02.21',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="top" title="sizes 2014.02.21 documentation" href="../index.html" />
    <link rel="up" title="USER GUIDE FOR THE MAXIMUM ENTROPY SAS ANALYSIS PROGRAM MaxSas.for" href="index.html" />
    <link rel="next" title="User Interaction with the program" href="interaction.html" />
    <link rel="prev" title="OUTPUT FORMAT" href="output_data_format.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="interaction.html" title="User Interaction with the program"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="output_data_format.html" title="OUTPUT FORMAT"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">sizes 2014.02.21 documentation</a> &raquo;</li>
          <li><a href="../contents.html" >Table of Contents</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">USER GUIDE FOR THE MAXIMUM ENTROPY SAS ANALYSIS PROGRAM <strong>MaxSas.for</strong></a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="example-of-the-program-execution-on-a-dec-vax">
<h1>EXAMPLE OF THE PROGRAM EXECUTION ON A DEC Vax<a class="headerlink" href="#example-of-the-program-execution-on-a-dec-vax" title="Permalink to this headline">Â¶</a></h1>
<p>The following is an excerpt from the execution of MaxSas as it is
analyzing the supplied test distribution BIMODAL.SAS, a bimodal
distribution with two Gaussian peaks: one at 80 Angstroms with a sigma
of 20 A and the other at 200 A with a sigma of 60 A.  The Gaussian at
200 A is half the height of the one at 80 A.  For a further discussion
of this distribution, see [Culverwell, 1986].  The exact volume
fraction of the original distribution was not specified.</p>
<p>In the section to follow, all user responses will be all in upper case
where appropriate and will be followed by a {CR}, signifying that the
user has pressed the return key.  {CR} by itself signifies that the
user has accepted the default answer to the question, as shown in
&lt;default&gt;.  Almost all questions have a default response, the only
exception being the output file names which may take any value EXCEPT
blank or the same as the input file name.  Initially, all the defaults
are preset to the proper answers for the supplied test distribution
BIMODAL.SAS.  If you type in a new value, that will value will become
the default the next time that the question is asked.</p>
<p>The example to follow will be interrupted from time to time for
explanations.  These will be isolated between rows of &#8220;====&#8221; signs.
For further explanations of each question which is asked, see the
appropriate section appearing elsewhere in this document.</p>
<p>Now here&#8217;s the excerpt from the beginning of the run.  Remember that
all user responses are on a single line and are terminated with a
{CR}.</p>
<div class="highlight-python"><div class="highlight"><pre>$ RUN MaxSas{CR}

Size distributions from SAS data using the maximum entropy criterion
   version: 3.1 (PRJ)                ,   7 February 1990
 Input file? &lt;Quit&gt;
Bimodal.Sas{CR}
 Output file?
Bimodal.Out{CR}
 Minimum q-vector? [1/A] &lt;  1.000000000000000E-008&gt;
{CR}
 Maximum q-vector? [1/A] &lt;   100.000000000000     &gt;
{CR}
 Scattering contrast? [10^28 m^-4] &lt;   1.00000000000000     &gt;
{CR}
 Factor to convert data to 1/cm? &lt;   1.00000000000000     &gt;
{CR}
 Error scaling factor? &lt;   1.00000000000000     &gt;
{CR}
 Background? &lt;  0.000000000000000E+000&gt;
{CR}
 Spheroids: D x D x vD,  Aspect ratio (v)?  &lt;   1.00000000000000     &gt;
{CR}
 Bin step scale? (1=Linear, 2=Log) &lt;           1&gt;
{CR}
 Number of histogram bins? &lt;          40&gt;
{CR}
 Maximum value of D? [A] &lt;   400.000000000000     &gt;
{CR}
 Minimum value of D? [A] &lt;   10.0000000000000     &gt;
{CR}
 Maximum number of iterations? &lt;          20&gt;
{CR}
 Reading from file: Bimodal.Sas
         38 points were read from the file
         38 points were selected from the data
 Preparation of the GRID function...
 Setting BASE constant at   1.000000000000000E-012
 MaxEnt routine beginning ...
</pre></div>
</div>
<p>To recap what has happened so far, the program was started and the
input data file BIMODAL.SAS was specified for analysis.  All the
default answers appeared to be acceptable so the program read 38
points from the file, of which all 38 points were retained for the
analysis.  The program informs you that it has set an internal array
called BASE to 1.0E-12.  BASE is the initial guess for the
distribution.  If there is a value in the output distribution that is
comparable with this number, then that particular histogram bin has no
significant information.  Consider then that BASE is the &#8220;featureless&#8221;
distribution and rest assured that it is quite flat.</p>
<p>At this point, the program has gotten all the adjustable parameters
that it needs and is now proceeding to attempt to solve the problem.</p>
<p>The fitting routine is an iterative one. If there are N histogram bins
and P data points then the computation time for each iteration will be
on the order of (very approximate) Order(2N+P). (This is why both N
and P are bounded.)</p>
<p>All sorts of information will begin to scroll on the screen at an
alarming rate as the Maximimum Entropy routine, or MaxEnt, (see
[Skilling, 1984] for details on what&#8217;s happening) begins to extract
statistically significant information from the SAS data.  With each
iteration, several different types of screen plots are drawn, each
describing the data extracted so far. The different plots are titled:</p>
<ul class="simple">
<li>LOG (ChiSq) vs. iteration number</li>
<li>Entropy vs. iteration number</li>
<li>Residuals</li>
<li>Distribution</li>
</ul>
<p>The first two plots will not appear until the third iteration.  They
are intended to keep you informed about the progress of the MaxEnt
routine.  The residuals (difference between MaxEnt fit and input data
normalized to the input errors) are plotted as a function of data
point subscript number, not Q-vector. The distribution is weighted by
the bin width, dD(i) = D(i+1) - D(i), and is also plotted as a
function of diametral bin subscript number. All plots will be scaled
to fit within the screen boundaries.</p>
<p>The last information to appear in each iteration will be a report,
such as:</p>
<div class="highlight-python"><div class="highlight"><pre> #           2 of           20,  n  =           38
test =   0.19101,  Entropy =    3.4668138
 SQRT((Chi^2)/n):  target =  12.14204774     % off =    26.2698
        f-vector:     sum =   0.00452313  % change =     0.4663
</pre></div>
</div>
<p>The report is saying that for the second iteration out of 20, where
there are 38 intensity data points, the difference between the entropy
and ChiSquared gradients is 0.19101, the entropy of the distribution
just plotted is 3.4668138 (whose units are exact), the target for the
SQRT((ChiSquared)/n), where ChiSquared is derived from intensity
calculated from the distribution just plotted, of 12.14204774 was
missed by 26.2698%, and the total volume fraction of scatterers in the
distribution just plotted is 0.452313 %, which did not change much
from the previous iteration.  The iterations will continue.</p>
<p>Here is the screen output from the last iteration:</p>
<div class="highlight-python"><div class="highlight"><pre> LOG (ChiSq) vs. iteration number
          1 point(s) per column
 0.405168291335942      units per row
 -----------
|           |
|OO         |
|  O        |
|   O       |
|           |
|    O      |
|           |
|     O     |
|      O    |
|       O   |
|           |
|        O  |
|         O |
|           |
|==========O|
 -----------

 Entropy vs. iteration number
          1 point(s) per column
 5.229508533621462E-002 units per row
 -----------
|===========|
|           |
|           |
|O          |
|           |
|           |
| O         |
|           |
|           |
|           |
|  O        |
|           |
|        OOO|
|      OO   |
|   OOO     |
 -----------

 Residuals
          1 point(s) per column
 0.315439585860872      standard deviations per row
 --------------------------------------
|                                    O |
|                                      |
|  OO                          O       |
|                                      |
|                                     O|
|====O==O======O====O=====O============|
|                       O   O      O   |
|          OO              O           |
|     O            O  O         O      |
|        OO   O   O      O   OO        |
|OO             OO   O O               |
|======O=========================OO====|
|                                      |
|                                      |
|            O                      O  |
 --------------------------------------

 Distribution
          1 point(s) per column
 6.975972282206744E-005 units per row
 ------------------------------------------
|      O                                   |
|                                          |
|                                          |
|       O                                  |
|                                          |
|                                          |
|                                          |
|                                          |
|        O                                 |
|                  OO                      |
|     O   OOOO    O  O  O                  |
|             O  O    OO OO                |
|              OO                          |
|                          OO              |
|OOOOO=======================OOOOOOOOOOOOOO|
 ------------------------------------------
 #          11 of           20,  n  =           38
test =   0.01587,  Entropy =    3.1391598
 SQRT((Chi^2)/n):  target =   1.00000000     % off =     0.0504
        f-vector:     sum =   0.00809492  % change =     4.0445
</pre></div>
</div>
<p>The problem has been solved in 11 iterations of the MaxEnt routine.
The two criteria for solution are that TEST &lt;= 0.05 (5%) and that the
SQRT((Chi^2)/n) target be met within 0.5%.  Observe that the volume
fraction has not changed very much from the previous iteration.</p>
<p>Here is the summary screen output of the analysis:</p>
<div class="highlight-python"><div class="highlight"><pre> Input file: Bimodal.Sas
 Volume weighted size dist.: V(r)N(r) versus r
  2.63513513513514      units per column
 1.395194456441349E-005 units per row
 ---------------------------------------------------------------------------
|           O                                                               |
|                                                                           |
|                                                                           |
|             O                                                             |
|                                                                           |
|                                                                           |
|                                                                           |
|                                                                           |
|               O                                                           |
|                                  O O                                      |
|         O       OO O O         O    O     O                               |
|                        O     O        O O   O O                           |
|                          O O                                              |
|                                                 O O                       |
|OO O O O                                             O OO O O O O O O O O O|
 ---------------------------------------------------------------------------
 standardized residuals vs. point number
          1 point(s) per column
 0.315439585860872      standard deviations per row
 --------------------------------------
|                                    O |
|                                      |
|  OO                          O       |
|                                      |
|                                     O|
|====O==O======O====O=====O============|
|                       O   O      O   |
|          OO              O           |
|     O            O  O         O      |
|        OO   O   O      O   OO        |
|OO             OO   O O               |
|======O=========================OO====|
|                                      |
|                                      |
|            O                      O  |
 --------------------------------------

Input data: Bimodal.Sas
Contrast =       1.0000000 x 10^28 m^-4.
 spheroid: D x D x D*   1.00000000000000
Data conversion factor to 1/cm =  1.00000E+00
Error scaling factor =  1.00000E+00
Histogram bins are distributed in an increasing algebraic series.
Minimum particle dimension D =        10.00 A.
Maximum particle dimension D =       400.00 A.
Number of histogram bins =   40.
Maximum number of iterations allowed =   20.
Program left MaxEnt routine after   11 iterations.
Target chi-squared (# data points) =    38.
Best value of chi-squared achieved =    38.038279.
Entropy of the final distribution =    3.1389744.
Entropy of    a flat distribution =    3.6888795.
Total particles  =     1.57329E+16 per cubic cm.
Total volume fraction of all scatterers =     0.008094741.
Part of distribution smaller than        10.00 A =     0.00000000%.
Part of distribution  larger than       400.00 A =     0.00215387%.
Volume-weighted   mode D value =     70.00000 A.
Volume-weighted   mean D value =    153.25044 A.
Volume-weighted std. deviation =     72.92106 A.
Number-weighted   mode D value =     70.00000 A.
Number-weighted   mean D value =     83.89447 A.
Number-weighted std. deviation =     33.47500 A.
Minimum Q-vector =   7.4935700E-03 1/A.
Maximum Q-vector =   9.9937470E-02 1/A.
   User-specified background =        0.000000000 input data units
        Suggested background =        0.000064250 input data units
StDev of shift in background =        0.000330552 input data units
 New background should give ChiSq =    36.6534794792953
</pre></div>
</div>
<p>By now, the tabular data of the size distribution and the intensity
fit have been written to the data file BIMODAL.OUT.  The summary
analysis of the distribution has also been written to the output file.</p>
<p>The program has found about 0.8% by volume of scatterers.  The
ChiSquared matches the number of intensity points (a requirement for
solution) and the background suggested is not far from the background
used (with respect to the sigma of the last intensity of 0.000123
1/cm).  Observe that the standard deviation of the suggested shift
in the background is much larger than the suggested shift.</p>
<p>It appears that we have a reasonable solution in hand.  Don&#8217;t be too
hasty to believe it yet.  In order to test the stability of the
answer, analyze the BIMODAL.SAS data again, using all the same
parameters as before (just take the defaults) except use the
background (0.000064251 1/cm) suggested by MaxSas.</p>
<p>Therefore, you should respond affirmatively to the Stability Check
question. Note the default answer on the Stability Check question is
&#8220;N&#8221;.</p>
<div class="highlight-python"><div class="highlight"><pre>  The change in ChiSquared should be &lt; 5%.
  Run the Stability Check? (Y/&lt;N&gt;)
Y{CR}
  Setting BASE constant at    1.000000000000000E-12
  MaxEnt routine beginning ...
</pre></div>
</div>
<p>For this documentation, the results of the stability check will not be
shown.  There is not much change in the volume fraction after the
stability check (about 1% or so) for the supplied test distribution.</p>
<p>After the Stability Check, you should get this question again.
This time, respond like the following to quit the program.</p>
<div class="highlight-python"><div class="highlight"><pre>  The change in ChiSquared should be &lt; 5%.
  Run the Stability Check? (Y/&lt;N&gt;)
{CR}

 The program is finished.
 The output file is: BIMODAL.MAX

Size distributions from SAS data using the maximum entropy criterion
   version: 3.1 (PRJ)                ,   7 February 1990
  Input file? &lt;Quit&gt;
{CR}

$
</pre></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="output_data_format.html"
                        title="previous chapter">OUTPUT FORMAT</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="interaction.html"
                        title="next chapter">User Interaction with the program</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/maxsas/example_vax.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="interaction.html" title="User Interaction with the program"
             >next</a> |</li>
        <li class="right" >
          <a href="output_data_format.html" title="OUTPUT FORMAT"
             >previous</a> |</li>
        <li><a href="../index.html">sizes 2014.02.21 documentation</a> &raquo;</li>
          <li><a href="../contents.html" >Table of Contents</a> &raquo;</li>
          <li><a href="index.html" >USER GUIDE FOR THE MAXIMUM ENTROPY SAS ANALYSIS PROGRAM <strong>MaxSas.for</strong></a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013-2014, Pete R. Jemian.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.1.
    </div>
  </body>
</html>